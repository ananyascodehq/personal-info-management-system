{% extends 'base.html' %} {% block content %}
<h2 class="mb-3">All Persons</h2>

<!-- 🔍 Search Form -->
<form method="GET" action="/" class="mb-3 d-flex gap-2">
  <input
    type="text"
    name="q"
    class="form-control"
    placeholder="Search by name, email, or phone..."
    value="{{ search_query }}"
  />
  <button type="submit" class="btn btn-primary">Search</button>
  {% if search_query %}
  <a href="{{ url_for('index') }}" class="btn btn-secondary">Clear</a>
  {% endif %}
</form>

{% if is_empty %}
<div class="alert alert-info text-center p-4 rounded">
  <h5>📌 No matching records found.</h5>
  <p>
    Try adjusting your search or
    <a href="{{ url_for('add_person') }}">add a new person</a>.
  </p>
</div>
{% else %}
<table class="table table-bordered table-striped">
  <thead>
    <tr>
      {% for header in headers %}
      <th>{{ header }}</th>
      {% endfor %}
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for row in persons %}
    <tr>
      {% for value in row %}
      <td>{{ value }}</td>
      {% endfor %}
      <td>
        <a
          href="{{ url_for('update_person', id=row[0]) }}"
          class="btn btn-sm btn-primary"
          >Edit</a
        >
        <a
          href="{{ url_for('delete_person', id=row[0]) }}"
          class="btn btn-sm btn-danger"
          onclick="return confirm('Are you sure you want to delete this record?');"
          >Delete</a
        >
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %} {% endblock %}
